{
  "info": {
    "name": "Sistema de Expediente Digital API",
    "description": "API completa para gestión de expedientes digitales con firma electrónica y workflow entre oficinas",
    "version": "1.0.0",
    "lastUpdated": "2026-02-09",
    "baseUrl": {
      "development": "http://localhost:4000",
      "production": "http://10.64.160.220:4000"
    },
    "authentication": {
      "type": "Bearer Token (JWT)",
      "header": "Authorization: Bearer {{token}}",
      "tokenExpiration": "24h",
      "loginEndpoint": "/api/auth/login"
    }
  },
  "generalNotes": {
    "authentication": "Todas las rutas marcadas con 'auth: true' requieren header Authorization: Bearer <JWT_TOKEN>",
    "estadosExpediente": ["borrador", "en_proceso", "consolidado", "cerrado"],
    "tiposCertificado": ["internal", "government", "external"],
    "rolesUsuario": ["administrador", "funcionario_oficial", "empleado_interno"],
    "formatosArchivo": {
      "documentos": ["PDF", "DOC", "DOCX", "PNG", "JPG", "JPEG"],
      "certificados": ["P12", "PFX"],
      "firmasVisuales": ["PNG", "JPG", "JPEG", "SVG"]
    },
    "limitesTamaño": {
      "documentos": "10MB",
      "certificados": "10MB",
      "firmasVisuales": "5MB"
    }
  },
  "modules": [
    {
      "name": "Usuarios",
      "description": "Gestión de usuarios, firmas manuscritas y certificados",
      "baseRoute": "/api/usuarios",
      "sourceFile": "backend/routes/usuarios.js",
      "routes": [
        {
          "method": "GET",
          "path": "/api/usuarios/mi-firma",
          "summary": "Obtener firma manuscrita del usuario autenticado",
          "description": "Retorna la firma manuscrita predeterminada del usuario actual",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Firma obtenida exitosamente",
              "example": {
                "success": true,
                "firma": {
                  "id": 1,
                  "usuario_id": 5,
                  "imagen_base64": "data:image/png;base64,...",
                  "es_predeterminada": true,
                  "created_at": "2026-02-09T10:00:00Z"
                }
              }
            },
            "404": {
              "description": "Usuario no tiene firma registrada",
              "example": {
                "error": "No se encontró firma para este usuario"
              }
            },
            "401": {
              "description": "No autenticado",
              "example": {
                "error": "Token inválido o expirado"
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/usuarios/mi-firma-digital",
          "summary": "Obtener firma digital del usuario autenticado",
          "description": "Retorna la firma digital generada automáticamente del usuario",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Firma digital obtenida",
              "example": {
                "success": true,
                "firma": {
                  "id": 2,
                  "usuario_id": 5,
                  "tipo_firma": "digital",
                  "imagen_base64": "data:image/png;base64,..."
                }
              }
            },
            "404": {
              "description": "No tiene firma digital",
              "example": {
                "error": "No se encontró firma digital"
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/usuarios/mis-certificados",
          "summary": "Listar certificados del usuario con estado",
          "description": "Lista todos los certificados del usuario autenticado mostrando si están vigentes, vencidos o por vencer",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Lista de certificados con estado",
              "example": {
                "success": true,
                "certificados": [
                  {
                    "id": 1,
                    "tipo": "internal",
                    "estado": "vigente",
                    "fecha_expiracion": "2027-02-09",
                    "subject": "CN=Juan Perez"
                  }
                ]
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/usuarios/certificados-publicos",
          "summary": "Listar todos los certificados (sin autenticación)",
          "description": "Endpoint público solo para desarrollo - lista todos los certificados del sistema",
          "auth": false,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Lista de todos los certificados",
              "example": {
                "success": true,
                "certificados": []
              }
            }
          }
        }
      ]
    },
    {
      "name": "Certificados",
      "description": "Gestión de certificados digitales (generación, importación, activación)",
      "baseRoute": "/api/certificates",
      "sourceFile": "backend/routes/certificados.js",
      "routes": [
        {
          "method": "GET",
          "path": "/api/certificates/my-certificates",
          "summary": "Obtener certificados del usuario autenticado",
          "description": "Lista todos los certificados digitales asociados al usuario actual",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Lista de certificados del usuario",
              "example": {
                "success": true,
                "certificates": []
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/certificates/import-p12",
          "summary": "Importar certificado P12/PFX con contraseña",
          "description": "Permite importar un certificado digital en formato P12 o PFX protegido con contraseña",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": true,
          "uploadField": "certificate",
          "pathParams": [],
          "queryParams": [],
          "requestBody": {
            "type": "multipart/form-data",
            "fields": [
              {
                "name": "certificate",
                "type": "file",
                "required": true,
                "description": "Archivo P12/PFX"
              },
              {
                "name": "password",
                "type": "string",
                "required": true,
                "description": "Contraseña del certificado"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Certificado importado exitosamente",
              "example": {
                "success": true,
                "message": "Certificado importado correctamente",
                "certificate": {
                  "id": 10,
                  "tipo": "external"
                }
              }
            },
            "400": {
              "description": "Error en validación",
              "example": {
                "error": "Contraseña incorrecta o archivo inválido"
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/certificates/generate-internal",
          "summary": "Generar certificado interno autofirmado RSA-2048",
          "description": "Genera un certificado digital interno autofirmado para el usuario",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "commonName",
                "type": "string",
                "required": false,
                "description": "Nombre común del certificado (CN)"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Certificado generado exitosamente",
              "example": {
                "success": true,
                "message": "Certificado interno generado",
                "certificate": {
                  "id": 11,
                  "tipo": "internal"
                }
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/certificates/:id/activate",
          "summary": "Activar un certificado específico",
          "description": "Activa un certificado y desactiva otros del mismo tipo del usuario",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del certificado a activar"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Certificado activado",
              "example": {
                "success": true,
                "message": "Certificado activado correctamente"
              }
            },
            "404": {
              "description": "Certificado no encontrado",
              "example": {
                "error": "Certificado no existe"
              }
            }
          }
        },
        {
          "method": "DELETE",
          "path": "/api/certificates/:id",
          "summary": "Eliminar un certificado",
          "description": "Elimina un certificado del usuario. No permite eliminar el único certificado activo",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del certificado a eliminar"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Certificado eliminado",
              "example": {
                "success": true,
                "message": "Certificado eliminado"
              }
            },
            "400": {
              "description": "No se puede eliminar",
              "example": {
                "error": "No puedes eliminar tu único certificado activo"
              }
            }
          }
        }
      ]
    },
    {
      "name": "Firmas",
      "description": "Gestión de firmas manuscritas y digitales de usuarios",
      "baseRoute": "/api/firmas",
      "sourceFile": "backend/routes/firmas.js",
      "routes": [
        {
          "method": "GET",
          "path": "/api/admin/usuarios/:id/firmas",
          "summary": "Listar todas las firmas de un usuario específico",
          "description": "Endpoint administrativo para ver todas las firmas de cualquier usuario",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del usuario"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Lista de firmas del usuario",
              "example": {
                "success": true,
                "firmas": []
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/admin/usuarios/:id/firmas",
          "summary": "Subir nueva firma visual para un usuario",
          "description": "Permite al administrador subir una firma manuscrita para cualquier usuario",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": true,
          "uploadField": "firma",
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del usuario"
            }
          ],
          "queryParams": [],
          "requestBody": {
            "type": "multipart/form-data",
            "fields": [
              {
                "name": "firma",
                "type": "file",
                "required": true,
                "description": "Archivo de imagen (PNG, JPG, SVG)"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Firma subida exitosamente",
              "example": {
                "success": true,
                "firma": {
                  "id": 5
                }
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/admin/usuarios/:id/firmas/:firmaId/imagen",
          "summary": "Obtener imagen de una firma específica",
          "description": "Retorna la imagen de una firma en base64",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del usuario"
            },
            {
              "name": "firmaId",
              "type": "integer",
              "required": true,
              "description": "ID de la firma"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Imagen de la firma",
              "example": {
                "success": true,
                "imagen": "data:image/png;base64,..."
              }
            }
          }
        },
        {
          "method": "PUT",
          "path": "/api/admin/usuarios/:id/firmas/:firmaId/predeterminada",
          "summary": "Establecer firma como predeterminada",
          "description": "Marca una firma como predeterminada para el usuario",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del usuario"
            },
            {
              "name": "firmaId",
              "type": "integer",
              "required": true,
              "description": "ID de la firma"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Firma establecida como predeterminada",
              "example": {
                "success": true,
                "message": "Firma predeterminada actualizada"
              }
            }
          }
        },
        {
          "method": "DELETE",
          "path": "/api/admin/usuarios/:id/firmas/:firmaId",
          "summary": "Eliminar (desactivar) una firma de usuario",
          "description": "Desactiva una firma del sistema",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del usuario"
            },
            {
              "name": "firmaId",
              "type": "integer",
              "required": true,
              "description": "ID de la firma"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Firma eliminada",
              "example": {
                "success": true,
                "message": "Firma eliminada"
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/usuarios/mi-firma",
          "summary": "Obtener firma predeterminada del usuario autenticado",
          "description": "Retorna la firma manuscrita predeterminada del usuario actual",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Firma obtenida",
              "example": {
                "success": true,
                "firma": {}
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/usuarios/mi-firma",
          "summary": "Subir firma visual propia",
          "description": "Permite al usuario subir su propia firma manuscrita",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": true,
          "uploadField": "firma",
          "pathParams": [],
          "queryParams": [],
          "requestBody": {
            "type": "multipart/form-data",
            "fields": [
              {
                "name": "firma",
                "type": "file",
                "required": true,
                "description": "Archivo de imagen"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Firma subida",
              "example": {
                "success": true
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/usuarios/generar-firma-digital",
          "summary": "Generar firma digital automática (texto a imagen)",
          "description": "Genera una firma digital a partir de texto con estilo personalizado",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "texto",
                "type": "string",
                "required": true,
                "description": "Texto de la firma"
              },
              {
                "name": "estilo",
                "type": "string",
                "required": false,
                "description": "Estilo de fuente"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Firma generada",
              "example": {
                "success": true,
                "firma": {
                  "imagen_base64": "data:image/png;base64,..."
                }
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/usuarios/mi-firma-digital",
          "summary": "Obtener la firma digital generada del usuario",
          "description": "Retorna la firma digital automática del usuario",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Firma digital obtenida",
              "example": {
                "success": true,
                "firma": {}
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/usuarios/mi-firma-digital/imagen",
          "summary": "Obtener imagen de la firma digital generada",
          "description": "Retorna solo la imagen en base64 de la firma digital",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Imagen de firma digital",
              "example": {
                "success": true,
                "imagen": "data:image/png;base64,..."
              }
            }
          }
        },
        {
          "method": "DELETE",
          "path": "/api/usuarios/mi-firma-digital/:id",
          "summary": "Eliminar firma digital del usuario",
          "description": "Elimina la firma digital generada del usuario",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID de la firma digital"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Firma eliminada",
              "example": {
                "success": true
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/usuarios/mi-firma/imagen",
          "summary": "Obtener imagen de la firma manuscrita del usuario",
          "description": "Retorna solo la imagen en base64 de la firma manuscrita",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Imagen de firma manuscrita",
              "example": {
                "success": true,
                "imagen": "data:image/png;base64,..."
              }
            }
          }
        },
        {
          "method": "DELETE",
          "path": "/api/usuarios/mi-firma/:id",
          "summary": "Eliminar firma manuscrita del usuario",
          "description": "Elimina una firma manuscrita del usuario",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID de la firma manuscrita"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Firma eliminada",
              "example": {
                "success": true
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/firmas/tipos-permitidos",
          "summary": "Obtener tipos de archivo permitidos y recomendaciones",
          "description": "Lista los formatos de archivo permitidos para firmas",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Tipos permitidos",
              "example": {
                "success": true,
                "tipos": ["PNG", "JPG", "JPEG", "SVG"]
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/firmas/validar",
          "summary": "Validar archivo de firma sin subirlo",
          "description": "Valida que un archivo cumpla con los requisitos sin guardarlo",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": true,
          "uploadField": "firma",
          "pathParams": [],
          "queryParams": [],
          "requestBody": {
            "type": "multipart/form-data",
            "fields": [
              {
                "name": "firma",
                "type": "file",
                "required": true,
                "description": "Archivo a validar"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Archivo válido",
              "example": {
                "success": true,
                "valido": true
              }
            },
            "400": {
              "description": "Archivo inválido",
              "example": {
                "error": "Formato no permitido"
              }
            }
          }
        }
      ]
    },
    {
      "name": "Expedientes",
      "description": "Gestión completa de expedientes digitales, documentos y firmas",
      "baseRoute": "/api/expedientes",
      "sourceFile": "backend/routes/expedientes.js",
      "routes": [
        {
          "method": "POST",
          "path": "/api/expedientes",
          "summary": "Crear nuevo expediente",
          "description": "Crea un expediente digital con información básica",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "titulo",
                "type": "string",
                "required": true,
                "description": "Título del expediente"
              },
              {
                "name": "descripcion",
                "type": "string",
                "required": false,
                "description": "Descripción del expediente"
              },
              {
                "name": "reparticion",
                "type": "string",
                "required": false,
                "description": "Repartición asociada"
              },
              {
                "name": "estado",
                "type": "string",
                "required": false,
                "description": "Estado inicial (borrador, en_proceso, consolidado, cerrado)"
              },
              {
                "name": "prioridad",
                "type": "string",
                "required": false,
                "description": "Prioridad del expediente"
              },
              {
                "name": "metadatos",
                "type": "object",
                "required": false,
                "description": "Metadatos adicionales"
              }
            ]
          },
          "responses": {
            "201": {
              "description": "Expediente creado",
              "example": {
                "success": true,
                "expediente": {
                  "id": 100,
                  "titulo": "Expediente de prueba"
                }
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/expedientes",
          "summary": "Listar expedientes (con paginación y filtros)",
          "description": "Lista expedientes con filtros por estado, prioridad y paginación",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": true,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [
            {
              "name": "estado",
              "type": "string",
              "required": false,
              "description": "Filtrar por estado"
            },
            {
              "name": "prioridad",
              "type": "string",
              "required": false,
              "description": "Filtrar por prioridad"
            },
            {
              "name": "page",
              "type": "integer",
              "required": false,
              "description": "Número de página"
            },
            {
              "name": "limit",
              "type": "integer",
              "required": false,
              "description": "Límite de resultados por página"
            }
          ],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Lista de expedientes",
              "example": {
                "success": true,
                "expedientes": [],
                "total": 0,
                "page": 1,
                "limit": 10
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/expedientes/:id",
          "summary": "Obtener expediente específico con documentos",
          "description": "Obtiene los detalles completos de un expediente incluyendo sus documentos",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": true,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Expediente obtenido",
              "example": {
                "success": true,
                "expediente": {
                  "id": 100,
                  "titulo": "Expediente X",
                  "documentos": []
                }
              }
            },
            "404": {
              "description": "Expediente no encontrado",
              "example": {
                "error": "Expediente no existe"
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/expedientes/:id/firmas",
          "summary": "Obtener detalles del expediente con información de firmas",
          "description": "Obtiene el expediente con información detallada de firmas de documentos",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": true,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Expediente con firmas",
              "example": {
                "success": true,
                "expediente": {}
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/expedientes/:id/documentos",
          "summary": "Agregar documento a expediente",
          "description": "Sube un documento al expediente especificado",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": true,
          "hasFileUpload": true,
          "uploadField": "documento",
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            }
          ],
          "queryParams": [],
          "requestBody": {
            "type": "multipart/form-data",
            "fields": [
              {
                "name": "documento",
                "type": "file",
                "required": true,
                "description": "Archivo del documento"
              },
              {
                "name": "documento_nombre",
                "type": "string",
                "required": true,
                "description": "Nombre del documento"
              },
              {
                "name": "documento_tipo",
                "type": "string",
                "required": true,
                "description": "Tipo de documento"
              },
              {
                "name": "numero_foja",
                "type": "integer",
                "required": false,
                "description": "Número de foja"
              }
            ]
          },
          "responses": {
            "201": {
              "description": "Documento agregado",
              "example": {
                "success": true,
                "documento": {
                  "id": 50
                }
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/expedientes/:id/documentos/:docId/archivo",
          "summary": "Servir/descargar archivo de documento",
          "description": "Descarga el archivo original o firmado de un documento",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": true,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            },
            {
              "name": "docId",
              "type": "integer",
              "required": true,
              "description": "ID del documento"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Archivo del documento",
              "example": "Binary file stream"
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/expedientes/:id/documentos/:docId/verificar-firma",
          "summary": "Verificar firma digital de un documento",
          "description": "Verifica la validez de la firma digital de un documento",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            },
            {
              "name": "docId",
              "type": "integer",
              "required": true,
              "description": "ID del documento"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Resultado de verificación",
              "example": {
                "success": true,
                "valida": true,
                "firmante": "Juan Perez"
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/expedientes/:id/documentos/:docId/firmar",
          "summary": "Firmar documento del expediente",
          "description": "Firma digitalmente un documento del expediente. Soporta firma con token, firma interna y firma con certificado",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": true,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            },
            {
              "name": "docId",
              "type": "integer",
              "required": true,
              "description": "ID del documento"
            }
          ],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "metodo",
                "type": "string",
                "required": true,
                "description": "Método de firma (token, interno, certificado)"
              },
              {
                "name": "firmaDigital",
                "type": "string",
                "required": true,
                "description": "Firma digital en base64"
              },
              {
                "name": "certificado",
                "type": "string",
                "required": false,
                "description": "Certificado en PEM"
              },
              {
                "name": "algoritmo",
                "type": "string",
                "required": false,
                "description": "Algoritmo de firma (SHA256, SHA512)"
              },
              {
                "name": "timestampFirma",
                "type": "string",
                "required": false,
                "description": "Timestamp de la firma"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Documento firmado exitosamente",
              "example": {
                "success": true,
                "message": "Documento firmado correctamente"
              }
            }
          }
        },
        {
          "method": "DELETE",
          "path": "/api/expedientes/:id/documentos/:docId",
          "summary": "Eliminar documento del expediente",
          "description": "Elimina un documento del expediente. No permite eliminar documentos firmados",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": true,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            },
            {
              "name": "docId",
              "type": "integer",
              "required": true,
              "description": "ID del documento"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Documento eliminado",
              "example": {
                "success": true
              }
            },
            "400": {
              "description": "No se puede eliminar",
              "example": {
                "error": "No se puede eliminar un documento firmado"
              }
            }
          }
        },
        {
          "method": "PATCH",
          "path": "/api/expedientes/:id/estado",
          "summary": "Actualizar estado del expediente",
          "description": "Cambia el estado del expediente (borrador, en_proceso, consolidado, cerrado)",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": true,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            }
          ],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "estado",
                "type": "string",
                "required": true,
                "description": "Nuevo estado"
              },
              {
                "name": "oficina_destino_id",
                "type": "integer",
                "required": false,
                "description": "ID de oficina destino"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Estado actualizado",
              "example": {
                "success": true
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/expedientes/:id/enviar",
          "summary": "Enviar expediente a otra oficina",
          "description": "Envía el expediente a otra oficina. Validación: todos los documentos deben estar firmados",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": true,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            }
          ],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "oficina_destino_id",
                "type": "integer",
                "required": true,
                "description": "ID de oficina destino"
              },
              {
                "name": "comentario",
                "type": "string",
                "required": false,
                "description": "Comentario del envío"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Expediente enviado",
              "example": {
                "success": true,
                "message": "Expediente enviado a la oficina destino"
              }
            },
            "400": {
              "description": "Validación fallida",
              "example": {
                "error": "Todos los documentos deben estar firmados"
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/expedientes/:id/preview",
          "summary": "Obtener previsualización completa del expediente",
          "description": "Obtiene vista previa del expediente con contenido PDF",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            }
          ],
          "queryParams": [
            {
              "name": "page",
              "type": "integer",
              "required": false,
              "description": "Número de página"
            },
            {
              "name": "limit",
              "type": "integer",
              "required": false,
              "description": "Límite de documentos"
            },
            {
              "name": "includeContent",
              "type": "boolean",
              "required": false,
              "description": "Incluir contenido PDF en base64"
            }
          ],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Previsualización del expediente",
              "example": {
                "success": true,
                "expediente": {},
                "documentos": []
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/expedientes/:id/merged-pdf",
          "summary": "Generar y servir PDF unificado del expediente",
          "description": "Combina todos los documentos del expediente en un solo PDF",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": true,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "PDF unificado",
              "example": "Binary PDF stream"
            }
          }
        }
      ]
    },
    {
      "name": "Workflow",
      "description": "Gestión de workflow y movimientos de expedientes entre oficinas",
      "baseRoute": "/api/workflow",
      "sourceFile": "backend/routes/workflow.js",
      "routes": [
        {
          "method": "POST",
          "path": "/api/workflow/:expedienteId/enviar-a-oficina",
          "summary": "Enviar expediente a oficina",
          "description": "Registra el movimiento de un expediente a otra oficina con trazabilidad completa",
          "auth": false,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "expedienteId",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            }
          ],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "oficina_destino_id",
                "type": "integer",
                "required": true,
                "description": "ID de oficina destino"
              },
              {
                "name": "motivo",
                "type": "string",
                "required": false,
                "description": "Motivo del envío"
              },
              {
                "name": "observaciones",
                "type": "string",
                "required": false,
                "description": "Observaciones adicionales"
              },
              {
                "name": "usuario_movimiento",
                "type": "integer",
                "required": false,
                "description": "ID del usuario que realiza el movimiento"
              },
              {
                "name": "prioridad",
                "type": "string",
                "required": false,
                "description": "Prioridad del movimiento"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Expediente enviado",
              "example": {
                "success": true,
                "movimiento": {}
              }
            }
          }
        },
        {
          "method": "PUT",
          "path": "/api/workflow/:expedienteId/cambiar-estado",
          "summary": "Cambiar estado de expediente",
          "description": "Actualiza el estado del expediente en el workflow",
          "auth": false,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "expedienteId",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            }
          ],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "nuevo_estado",
                "type": "string",
                "required": true,
                "description": "Nuevo estado del expediente"
              },
              {
                "name": "observaciones",
                "type": "string",
                "required": false,
                "description": "Observaciones del cambio"
              },
              {
                "name": "usuario_movimiento",
                "type": "integer",
                "required": false,
                "description": "ID del usuario"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Estado actualizado",
              "example": {
                "success": true
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/workflow/:expedienteId/agregar-documento",
          "summary": "Agregar documento a expediente desde workflow",
          "description": "Añade un documento al expediente durante el flujo de trabajo",
          "auth": false,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": true,
          "uploadField": "documento",
          "pathParams": [
            {
              "name": "expedienteId",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            }
          ],
          "queryParams": [],
          "requestBody": {
            "type": "multipart/form-data",
            "fields": [
              {
                "name": "documento",
                "type": "file",
                "required": true,
                "description": "Archivo del documento"
              },
              {
                "name": "documento_nombre",
                "type": "string",
                "required": true,
                "description": "Nombre del documento"
              },
              {
                "name": "documento_tipo",
                "type": "string",
                "required": true,
                "description": "Tipo de documento"
              },
              {
                "name": "oficina_id",
                "type": "integer",
                "required": false,
                "description": "ID de la oficina"
              },
              {
                "name": "usuario_agregado",
                "type": "integer",
                "required": false,
                "description": "ID del usuario"
              }
            ]
          },
          "responses": {
            "201": {
              "description": "Documento agregado",
              "example": {
                "success": true,
                "documento": {}
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/workflow/:expedienteId/historial",
          "summary": "Obtener historial de movimientos del expediente",
          "description": "Lista todos los movimientos y cambios de estado del expediente",
          "auth": false,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "expedienteId",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Historial de movimientos",
              "example": {
                "success": true,
                "historial": []
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/workflow/:expedienteId/estado-workflow",
          "summary": "Obtener estado actual del workflow del expediente",
          "description": "Obtiene el estado actual del workflow. Crea workflow inicial si no existe",
          "auth": false,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "expedienteId",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Estado del workflow",
              "example": {
                "success": true,
                "workflow": {}
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/workflow/:expedienteId/enviar",
          "summary": "Enviar expediente (alias de compatibilidad)",
          "description": "Alias de enviar-a-oficina para compatibilidad con frontend",
          "auth": false,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "expedienteId",
              "type": "integer",
              "required": true,
              "description": "ID del expediente"
            }
          ],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "oficina_destino_id",
                "type": "integer",
                "required": true,
                "description": "ID de oficina destino"
              },
              {
                "name": "prioridad",
                "type": "string",
                "required": false,
                "description": "Prioridad"
              },
              {
                "name": "motivo",
                "type": "string",
                "required": false,
                "description": "Motivo"
              },
              {
                "name": "observaciones",
                "type": "string",
                "required": false,
                "description": "Observaciones"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Expediente enviado",
              "example": {
                "success": true
              }
            }
          }
        }
      ]
    },
    {
      "name": "Oficinas",
      "description": "Gestión de oficinas gubernamentales y expedientes asociados",
      "baseRoute": "/api/oficinas",
      "sourceFile": "backend/routes/oficinas.js",
      "routes": [
        {
          "method": "GET",
          "path": "/api/oficinas",
          "summary": "Obtener todas las oficinas activas",
          "description": "Lista todas las oficinas del sistema que están activas",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Lista de oficinas",
              "example": {
                "success": true,
                "oficinas": []
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/oficinas/disponibles/:oficina_actual_id",
          "summary": "Obtener oficinas disponibles (excluyendo la actual)",
          "description": "Lista oficinas disponibles para envío de expedientes, excluyendo la oficina actual del usuario",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "oficina_actual_id",
              "type": "integer",
              "required": true,
              "description": "ID de la oficina actual"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Oficinas disponibles",
              "example": {
                "success": true,
                "oficinas": []
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/oficinas/:id",
          "summary": "Obtener una oficina por ID",
          "description": "Obtiene los detalles de una oficina específica",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID de la oficina"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Oficina obtenida",
              "example": {
                "success": true,
                "oficina": {}
              }
            },
            "404": {
              "description": "Oficina no encontrada",
              "example": {
                "error": "Oficina no existe"
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/oficinas",
          "summary": "Crear nueva oficina",
          "description": "Crea una nueva oficina en el sistema",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "nombre",
                "type": "string",
                "required": true,
                "description": "Nombre de la oficina"
              },
              {
                "name": "descripcion",
                "type": "string",
                "required": false,
                "description": "Descripción"
              },
              {
                "name": "codigo",
                "type": "string",
                "required": false,
                "description": "Código identificador"
              },
              {
                "name": "responsable",
                "type": "string",
                "required": false,
                "description": "Responsable de la oficina"
              },
              {
                "name": "email",
                "type": "string",
                "required": false,
                "description": "Email de contacto"
              },
              {
                "name": "telefono",
                "type": "string",
                "required": false,
                "description": "Teléfono de contacto"
              }
            ]
          },
          "responses": {
            "201": {
              "description": "Oficina creada",
              "example": {
                "success": true,
                "oficina": {}
              }
            }
          }
        },
        {
          "method": "PUT",
          "path": "/api/oficinas/:id",
          "summary": "Actualizar oficina",
          "description": "Actualiza los datos de una oficina existente",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID de la oficina"
            }
          ],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "nombre",
                "type": "string",
                "required": false,
                "description": "Nombre de la oficina"
              },
              {
                "name": "descripcion",
                "type": "string",
                "required": false,
                "description": "Descripción"
              },
              {
                "name": "codigo",
                "type": "string",
                "required": false,
                "description": "Código"
              },
              {
                "name": "responsable",
                "type": "string",
                "required": false,
                "description": "Responsable"
              },
              {
                "name": "email",
                "type": "string",
                "required": false,
                "description": "Email"
              },
              {
                "name": "telefono",
                "type": "string",
                "required": false,
                "description": "Teléfono"
              },
              {
                "name": "activa",
                "type": "boolean",
                "required": false,
                "description": "Si está activa"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Oficina actualizada",
              "example": {
                "success": true,
                "oficina": {}
              }
            }
          }
        },
        {
          "method": "DELETE",
          "path": "/api/oficinas/:id",
          "summary": "Desactivar oficina (soft delete)",
          "description": "Desactiva una oficina sin eliminarla físicamente de la base de datos",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID de la oficina"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Oficina desactivada",
              "example": {
                "success": true,
                "message": "Oficina desactivada"
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/oficinas/:id/expedientes",
          "summary": "Obtener expedientes de una oficina con filtros",
          "description": "Lista todos los expedientes asociados a una oficina con opción de filtrar por estado",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID de la oficina"
            }
          ],
          "queryParams": [
            {
              "name": "estado",
              "type": "string",
              "required": false,
              "description": "Filtrar por estado de expediente"
            }
          ],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Expedientes de la oficina",
              "example": {
                "success": true,
                "expedientes": []
              }
            }
          }
        }
      ]
    },
    {
      "name": "Administración",
      "description": "Funciones administrativas para gestión de usuarios",
      "baseRoute": "/api/admin",
      "sourceFile": "backend/routes/admin.js",
      "routes": [
        {
          "method": "GET",
          "path": "/api/admin/usuarios",
          "summary": "Obtener todos los usuarios con información de oficinas",
          "description": "Lista todos los usuarios del sistema incluyendo sus oficinas asociadas",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Lista de usuarios",
              "example": {
                "success": true,
                "usuarios": []
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/admin/usuarios",
          "summary": "Crear nuevo usuario",
          "description": "Crea un nuevo usuario en el sistema con rol y oficina asignada",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "username",
                "type": "string",
                "required": true,
                "description": "Nombre de usuario"
              },
              {
                "name": "nombre_completo",
                "type": "string",
                "required": true,
                "description": "Nombre completo"
              },
              {
                "name": "email",
                "type": "string",
                "required": true,
                "description": "Email del usuario"
              },
              {
                "name": "password",
                "type": "string",
                "required": true,
                "description": "Contraseña"
              },
              {
                "name": "rol_usuario",
                "type": "string",
                "required": true,
                "description": "Rol (administrador, funcionario_oficial, empleado_interno)"
              },
              {
                "name": "oficina_id",
                "type": "integer",
                "required": false,
                "description": "ID de la oficina"
              }
            ]
          },
          "responses": {
            "201": {
              "description": "Usuario creado",
              "example": {
                "success": true,
                "usuario": {
                  "id": 10,
                  "username": "jperez"
                }
              }
            }
          }
        },
        {
          "method": "PUT",
          "path": "/api/admin/usuarios/:id",
          "summary": "Actualizar usuario",
          "description": "Actualiza los datos de un usuario existente",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del usuario"
            }
          ],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "nombre_completo",
                "type": "string",
                "required": false,
                "description": "Nombre completo"
              },
              {
                "name": "email",
                "type": "string",
                "required": false,
                "description": "Email"
              },
              {
                "name": "rol_usuario",
                "type": "string",
                "required": false,
                "description": "Rol del usuario"
              },
              {
                "name": "oficina_id",
                "type": "integer",
                "required": false,
                "description": "ID de la oficina"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Usuario actualizado",
              "example": {
                "success": true,
                "usuario": {}
              }
            }
          }
        },
        {
          "method": "DELETE",
          "path": "/api/admin/usuarios/:id",
          "summary": "Eliminar usuario",
          "description": "Elimina un usuario del sistema. No permite eliminar usuario admin principal",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del usuario"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Usuario eliminado",
              "example": {
                "success": true,
                "message": "Usuario eliminado"
              }
            },
            "403": {
              "description": "No se puede eliminar",
              "example": {
                "error": "No puedes eliminar al administrador principal"
              }
            }
          }
        },
        {
          "method": "PUT",
          "path": "/api/admin/usuarios/:id/password",
          "summary": "Cambiar contraseña de usuario",
          "description": "Permite al administrador cambiar la contraseña de cualquier usuario",
          "auth": true,
          "requiresAdmin": true,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "id",
              "type": "integer",
              "required": true,
              "description": "ID del usuario"
            }
          ],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "password",
                "type": "string",
                "required": true,
                "description": "Nueva contraseña"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Contraseña actualizada",
              "example": {
                "success": true,
                "message": "Contraseña actualizada"
              }
            }
          }
        }
      ]
    },
    {
      "name": "Integración Laravel",
      "description": "Endpoints exclusivos para integración con sistema Laravel legacy (usuario 'eduge_service')",
      "baseRoute": "/api/laravel",
      "sourceFile": "backend/routes/laravelIntegration.js",
      "routes": [
        {
          "method": "POST",
          "path": "/api/laravel/signatures/sign",
          "summary": "Firmar documento desde Laravel con datos del usuario Laravel",
          "description": "Registra una firma digital realizada desde el sistema Laravel con trazabilidad completa del usuario Laravel",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": {
            "type": "application/json",
            "fields": [
              {
                "name": "laravelUser",
                "type": "object",
                "required": true,
                "description": "Datos del usuario Laravel {id, email, name}"
              },
              {
                "name": "documentData",
                "type": "object",
                "required": true,
                "description": "Datos del documento {nombre, hash, tipo, tamaño}"
              },
              {
                "name": "signatureData",
                "type": "object",
                "required": true,
                "description": "Datos de la firma {firma_digital, algoritmo, certificado_id}"
              },
              {
                "name": "metadata",
                "type": "object",
                "required": false,
                "description": "Metadatos adicionales {ip_address, user_agent, numero_expediente}"
              }
            ]
          },
          "responses": {
            "200": {
              "description": "Documento firmado exitosamente",
              "example": {
                "success": true,
                "signature": {
                  "id": 100,
                  "laravel_user_id": 5,
                  "document_hash": "abc123..."
                }
              }
            },
            "403": {
              "description": "Usuario no autorizado",
              "example": {
                "error": "Solo el usuario de servicio puede usar este endpoint"
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/laravel/signatures/user/:laravelUserId",
          "summary": "Obtener todas las firmas de un usuario de Laravel",
          "description": "Lista todas las firmas realizadas por un usuario específico del sistema Laravel",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "laravelUserId",
              "type": "integer",
              "required": true,
              "description": "ID del usuario en Laravel"
            }
          ],
          "queryParams": [
            {
              "name": "page",
              "type": "integer",
              "required": false,
              "description": "Número de página"
            },
            {
              "name": "limit",
              "type": "integer",
              "required": false,
              "description": "Límite de resultados (max 50)"
            },
            {
              "name": "estado",
              "type": "string",
              "required": false,
              "description": "Filtrar por estado (valida, invalida)"
            }
          ],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Lista de firmas del usuario",
              "example": {
                "success": true,
                "signatures": [],
                "total": 0,
                "page": 1,
                "limit": 50
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/laravel/signatures/:signatureId/verify",
          "summary": "Verificar estado de una firma específica",
          "description": "Verifica la validez y estado actual de una firma registrada",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "signatureId",
              "type": "integer",
              "required": true,
              "description": "ID de la firma"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Estado de la firma",
              "example": {
                "success": true,
                "signature": {
                  "id": 100,
                  "is_valid": true,
                  "signed_at": "2026-02-09T10:00:00Z"
                }
              }
            },
            "404": {
              "description": "Firma no encontrada",
              "example": {
                "error": "Firma no existe"
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/laravel/users/:laravelUserId/stats",
          "summary": "Obtener estadísticas de firmas de un usuario Laravel",
          "description": "Retorna estadísticas completas de firmas de un usuario (total, válidas, inválidas, por mes)",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [
            {
              "name": "laravelUserId",
              "type": "integer",
              "required": true,
              "description": "ID del usuario en Laravel"
            }
          ],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Estadísticas del usuario",
              "example": {
                "success": true,
                "stats": {
                  "total_firmas": 150,
                  "firmas_validas": 148,
                  "firmas_invalidas": 2,
                  "por_mes": {}
                }
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/laravel/health",
          "summary": "Health check de la integración Laravel",
          "description": "Verifica que la integración con Laravel esté funcionando correctamente",
          "auth": true,
          "requiresAdmin": false,
          "requiresOfficeAccess": false,
          "hasFileUpload": false,
          "pathParams": [],
          "queryParams": [],
          "requestBody": null,
          "responses": {
            "200": {
              "description": "Servicio saludable",
              "example": {
                "success": true,
                "status": "healthy",
                "timestamp": "2026-02-09T10:00:00Z"
              }
            }
          }
        }
      ]
    }
  ],
  "statistics": {
    "totalModules": 8,
    "totalRoutes": 89,
    "routesByMethod": {
      "GET": 36,
      "POST": 23,
      "PUT": 7,
      "PATCH": 1,
      "DELETE": 8
    },
    "routesWithAuth": 72,
    "routesWithAdminRequired": 16,
    "routesWithFileUpload": 10
  }
}
