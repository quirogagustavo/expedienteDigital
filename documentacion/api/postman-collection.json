{
  "info": {
    "name": "Sistema de Expediente Digital API",
    "description": "API completa para gestión de expedientes digitales con firma electrónica y workflow entre oficinas. Última actualización: 2026-02-09",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:4000",
      "type": "string"
    },
    {
      "key": "baseUrlProduction",
      "value": "http://10.64.160.220:4000",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "00. Setup & Authentication",
      "description": "Endpoints iniciales para configurar el ambiente y obtener token JWT",
      "item": [
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.token) {",
                  "        pm.collectionVariables.set('token', jsonData.token);",
                  "        pm.environment.set('token', jsonData.token);",
                  "        console.log('✓ Token guardado');",
                  "    }",
                  "}",
                  "",
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has token', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('token');",
                  "    pm.expect(jsonData).to.have.property('user');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "Endpoint de login: recibe username/email y password, devuelve token JWT válido por 24 horas",
            "auth": {
              "type": "noauth"
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"admin\",\n  \"password\": \"admin123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "01. Usuarios",
      "description": "Gestión de usuarios, firmas manuscritas y certificados",
      "item": [
        {
          "name": "Obtener mi firma manuscrita",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/usuarios/mi-firma",
              "host": ["{{baseUrl}}"],
              "path": ["api", "usuarios", "mi-firma"]
            },
            "description": "Obtiene la firma manuscrita predeterminada del usuario autenticado"
          },
          "response": []
        },
        {
          "name": "Obtener mi firma digital",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/usuarios/mi-firma-digital",
              "host": ["{{baseUrl}}"],
              "path": ["api", "usuarios", "mi-firma-digital"]
            },
            "description": "Obtiene la firma digital generada automáticamente del usuario"
          },
          "response": []
        },
        {
          "name": "Listar mis certificados",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/usuarios/mis-certificados",
              "host": ["{{baseUrl}}"],
              "path": ["api", "usuarios", "mis-certificados"]
            },
            "description": "Lista todos los certificados del usuario con su estado (vigente, vencido, por vencer)"
          },
          "response": []
        },
        {
          "name": "Listar certificados públicos (desarrollo)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/usuarios/certificados-publicos",
              "host": ["{{baseUrl}}"],
              "path": ["api", "usuarios", "certificados-publicos"]
            },
            "description": "Endpoint público para desarrollo - lista todos los certificados del sistema sin autenticación",
            "auth": {
              "type": "noauth"
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "02. Certificados",
      "description": "Gestión de certificados digitales (generación, importación, activación)",
      "item": [
        {
          "name": "Obtener mis certificados",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/certificates/my-certificates",
              "host": ["{{baseUrl}}"],
              "path": ["api", "certificates", "my-certificates"]
            },
            "description": "Lista todos los certificados digitales del usuario autenticado"
          },
          "response": []
        },
        {
          "name": "Importar certificado P12/PFX",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/certificates/import-p12",
              "host": ["{{baseUrl}}"],
              "path": ["api", "certificates", "import-p12"]
            },
            "description": "Importa un certificado digital en formato P12/PFX con contraseña",
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "certificate",
                  "type": "file",
                  "src": "",
                  "description": "Archivo P12/PFX del certificado"
                },
                {
                  "key": "password",
                  "value": "",
                  "type": "text",
                  "description": "Contraseña del certificado"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Generar certificado interno",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/certificates/generate-internal",
              "host": ["{{baseUrl}}"],
              "path": ["api", "certificates", "generate-internal"]
            },
            "description": "Genera un certificado interno autofirmado RSA-2048 para el usuario",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"commonName\": \"Juan Perez\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Activar certificado",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/certificates/:id/activate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "certificates", ":id", "activate"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del certificado a activar"
                }
              ]
            },
            "description": "Activa un certificado específico y desactiva otros del mismo tipo del usuario"
          },
          "response": []
        },
        {
          "name": "Eliminar certificado",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/certificates/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "certificates", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del certificado a eliminar"
                }
              ]
            },
            "description": "Elimina un certificado. Validación: no puede ser el único activo"
          },
          "response": []
        }
      ]
    },
    {
      "name": "03. Firmas",
      "description": "Gestión de firmas manuscritas y digitales de usuarios",
      "item": [
        {
          "name": "Admin - Listar firmas de usuario",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/usuarios/:id/firmas",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "usuarios", ":id", "firmas"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del usuario"
                }
              ]
            },
            "description": "[ADMIN] Lista todas las firmas de un usuario específico"
          },
          "response": []
        },
        {
          "name": "Admin - Subir firma para usuario",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/usuarios/:id/firmas",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "usuarios", ":id", "firmas"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del usuario"
                }
              ]
            },
            "description": "[ADMIN] Sube una nueva firma visual para un usuario",
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "firma",
                  "type": "file",
                  "src": "",
                  "description": "Archivo de imagen (PNG, JPG, SVG)"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Admin - Obtener imagen de firma",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/usuarios/:id/firmas/:firmaId/imagen",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "usuarios", ":id", "firmas", ":firmaId", "imagen"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del usuario"
                },
                {
                  "key": "firmaId",
                  "value": "1",
                  "description": "ID de la firma"
                }
              ]
            },
            "description": "[ADMIN] Obtiene la imagen de una firma específica en base64"
          },
          "response": []
        },
        {
          "name": "Admin - Establecer firma predeterminada",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/usuarios/:id/firmas/:firmaId/predeterminada",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "usuarios", ":id", "firmas", ":firmaId", "predeterminada"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del usuario"
                },
                {
                  "key": "firmaId",
                  "value": "1",
                  "description": "ID de la firma"
                }
              ]
            },
            "description": "[ADMIN] Marca una firma como predeterminada para el usuario"
          },
          "response": []
        },
        {
          "name": "Admin - Eliminar firma de usuario",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/usuarios/:id/firmas/:firmaId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "usuarios", ":id", "firmas", ":firmaId"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del usuario"
                },
                {
                  "key": "firmaId",
                  "value": "1",
                  "description": "ID de la firma"
                }
              ]
            },
            "description": "[ADMIN] Elimina (desactiva) una firma de usuario"
          },
          "response": []
        },
        {
          "name": "Obtener mi firma manuscrita",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/usuarios/mi-firma",
              "host": ["{{baseUrl}}"],
              "path": ["api", "usuarios", "mi-firma"]
            },
            "description": "Obtiene la firma manuscrita predeterminada del usuario autenticado"
          },
          "response": []
        },
        {
          "name": "Subir mi firma manuscrita",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/usuarios/mi-firma",
              "host": ["{{baseUrl}}"],
              "path": ["api", "usuarios", "mi-firma"]
            },
            "description": "Sube una firma visual propia",
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "firma",
                  "type": "file",
                  "src": "",
                  "description": "Archivo de imagen de la firma"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Generar firma digital automática",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/usuarios/generar-firma-digital",
              "host": ["{{baseUrl}}"],
              "path": ["api", "usuarios", "generar-firma-digital"]
            },
            "description": "Genera una firma digital automática a partir de texto",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"texto\": \"Juan Perez\",\n  \"estilo\": \"cursive\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Obtener mi firma digital",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/usuarios/mi-firma-digital",
              "host": ["{{baseUrl}}"],
              "path": ["api", "usuarios", "mi-firma-digital"]
            },
            "description": "Obtiene la firma digital generada del usuario"
          },
          "response": []
        },
        {
          "name": "Obtener imagen firma digital",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/usuarios/mi-firma-digital/imagen",
              "host": ["{{baseUrl}}"],
              "path": ["api", "usuarios", "mi-firma-digital", "imagen"]
            },
            "description": "Obtiene solo la imagen en base64 de la firma digital"
          },
          "response": []
        },
        {
          "name": "Eliminar mi firma digital",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/usuarios/mi-firma-digital/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "usuarios", "mi-firma-digital", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID de la firma digital"
                }
              ]
            },
            "description": "Elimina la firma digital del usuario"
          },
          "response": []
        },
        {
          "name": "Obtener imagen firma manuscrita",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/usuarios/mi-firma/imagen",
              "host": ["{{baseUrl}}"],
              "path": ["api", "usuarios", "mi-firma", "imagen"]
            },
            "description": "Obtiene solo la imagen en base64 de la firma manuscrita"
          },
          "response": []
        },
        {
          "name": "Eliminar mi firma manuscrita",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/usuarios/mi-firma/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "usuarios", "mi-firma", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID de la firma manuscrita"
                }
              ]
            },
            "description": "Elimina una firma manuscrita del usuario"
          },
          "response": []
        },
        {
          "name": "Obtener tipos de archivo permitidos",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/firmas/tipos-permitidos",
              "host": ["{{baseUrl}}"],
              "path": ["api", "firmas", "tipos-permitidos"]
            },
            "description": "Lista los formatos de archivo permitidos para firmas"
          },
          "response": []
        },
        {
          "name": "Validar archivo de firma",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/firmas/validar",
              "host": ["{{baseUrl}}"],
              "path": ["api", "firmas", "validar"]
            },
            "description": "Valida un archivo de firma sin subirlo al servidor",
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "firma",
                  "type": "file",
                  "src": "",
                  "description": "Archivo a validar"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "04. Expedientes",
      "description": "Gestión completa de expedientes digitales, documentos y firmas",
      "item": [
        {
          "name": "Crear expediente",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/expedientes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "expedientes"]
            },
            "description": "Crea un nuevo expediente digital",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"titulo\": \"Expediente de prueba\",\n  \"descripcion\": \"Descripción del expediente\",\n  \"reparticion\": \"Ministerio de Economía\",\n  \"estado\": \"borrador\",\n  \"prioridad\": \"alta\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Listar expedientes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/expedientes?estado=en_proceso&page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "expedientes"],
              "query": [
                {
                  "key": "estado",
                  "value": "en_proceso",
                  "description": "Filtrar por estado"
                },
                {
                  "key": "prioridad",
                  "value": "alta",
                  "description": "Filtrar por prioridad",
                  "disabled": true
                },
                {
                  "key": "page",
                  "value": "1",
                  "description": "Número de página"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Resultados por página"
                }
              ]
            },
            "description": "Lista expedientes con paginación y filtros"
          },
          "response": []
        },
        {
          "name": "Obtener expediente por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/expedientes/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "expedientes", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del expediente"
                }
              ]
            },
            "description": "Obtiene un expediente específico con sus documentos"
          },
          "response": []
        },
        {
          "name": "Obtener expediente con firmas",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/expedientes/:id/firmas",
              "host": ["{{baseUrl}}"],
              "path": ["api", "expedientes", ":id", "firmas"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del expediente"
                }
              ]
            },
            "description": "Obtiene el expediente con información detallada de firmas"
          },
          "response": []
        },
        {
          "name": "Agregar documento a expediente",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/expedientes/:id/documentos",
              "host": ["{{baseUrl}}"],
              "path": ["api", "expedientes", ":id", "documentos"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del expediente"
                }
              ]
            },
            "description": "Sube un documento al expediente",
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "documento",
                  "type": "file",
                  "src": "",
                  "description": "Archivo del documento"
                },
                {
                  "key": "documento_nombre",
                  "value": "Acta de reunion",
                  "type": "text",
                  "description": "Nombre del documento"
                },
                {
                  "key": "documento_tipo",
                  "value": "acta",
                  "type": "text",
                  "description": "Tipo de documento"
                },
                {
                  "key": "numero_foja",
                  "value": "1",
                  "type": "text",
                  "description": "Número de foja"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Descargar archivo de documento",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/expedientes/:id/documentos/:docId/archivo",
              "host": ["{{baseUrl}}"],
              "path": ["api", "expedientes", ":id", "documentos", ":docId", "archivo"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del expediente"
                },
                {
                  "key": "docId",
                  "value": "1",
                  "description": "ID del documento"
                }
              ]
            },
            "description": "Descarga el archivo original o firmado de un documento"
          },
          "response": []
        },
        {
          "name": "Verificar firma de documento",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/expedientes/:id/documentos/:docId/verificar-firma",
              "host": ["{{baseUrl}}"],
              "path": ["api", "expedientes", ":id", "documentos", ":docId", "verificar-firma"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del expediente"
                },
                {
                  "key": "docId",
                  "value": "1",
                  "description": "ID del documento"
                }
              ]
            },
            "description": "Verifica la validez de la firma digital de un documento"
          },
          "response": []
        },
        {
          "name": "Firmar documento",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/expedientes/:id/documentos/:docId/firmar",
              "host": ["{{baseUrl}}"],
              "path": ["api", "expedientes", ":id", "documentos", ":docId", "firmar"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del expediente"
                },
                {
                  "key": "docId",
                  "value": "1",
                  "description": "ID del documento"
                }
              ]
            },
            "description": "Firma digitalmente un documento del expediente",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"metodo\": \"interno\",\n  \"firmaDigital\": \"base64_signature_here\",\n  \"algoritmo\": \"SHA256\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Eliminar documento",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/expedientes/:id/documentos/:docId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "expedientes", ":id", "documentos", ":docId"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del expediente"
                },
                {
                  "key": "docId",
                  "value": "1",
                  "description": "ID del documento"
                }
              ]
            },
            "description": "Elimina un documento. No permite eliminar documentos firmados"
          },
          "response": []
        },
        {
          "name": "Actualizar estado de expediente",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/expedientes/:id/estado",
              "host": ["{{baseUrl}}"],
              "path": ["api", "expedientes", ":id", "estado"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del expediente"
                }
              ]
            },
            "description": "Cambia el estado del expediente",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"estado\": \"en_proceso\",\n  \"oficina_destino_id\": 2\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Enviar expediente a oficina",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/expedientes/:id/enviar",
              "host": ["{{baseUrl}}"],
              "path": ["api", "expedientes", ":id", "enviar"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del expediente"
                }
              ]
            },
            "description": "Envía el expediente a otra oficina. Validación: todos los documentos deben estar firmados",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"oficina_destino_id\": 2,\n  \"comentario\": \"Se envía para revisión\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Previsualización de expediente",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/expedientes/:id/preview?page=1&limit=5&includeContent=true",
              "host": ["{{baseUrl}}"],
              "path": ["api", "expedientes", ":id", "preview"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Número de página"
                },
                {
                  "key": "limit",
                  "value": "5",
                  "description": "Límite de documentos"
                },
                {
                  "key": "includeContent",
                  "value": "true",
                  "description": "Incluir contenido PDF en base64"
                }
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del expediente"
                }
              ]
            },
            "description": "Obtiene vista previa del expediente con contenido PDF"
          },
          "response": []
        },
        {
          "name": "Generar PDF unificado",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/expedientes/:id/merged-pdf",
              "host": ["{{baseUrl}}"],
              "path": ["api", "expedientes", ":id", "merged-pdf"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del expediente"
                }
              ]
            },
            "description": "Combina todos los documentos del expediente en un solo PDF"
          },
          "response": []
        }
      ]
    },
    {
      "name": "05. Workflow",
      "description": "Gestión de workflow y movimientos de expedientes entre oficinas",
      "item": [
        {
          "name": "Enviar expediente a oficina",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/workflow/:expedienteId/enviar-a-oficina",
              "host": ["{{baseUrl}}"],
              "path": ["api", "workflow", ":expedienteId", "enviar-a-oficina"],
              "variable": [
                {
                  "key": "expedienteId",
                  "value": "1",
                  "description": "ID del expediente"
                }
              ]
            },
            "description": "Registra el movimiento de un expediente a otra oficina",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"oficina_destino_id\": 2,\n  \"motivo\": \"Revisión técnica\",\n  \"observaciones\": \"Urgente\",\n  \"prioridad\": \"alta\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "auth": {
              "type": "noauth"
            }
          },
          "response": []
        },
        {
          "name": "Cambiar estado de expediente",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/workflow/:expedienteId/cambiar-estado",
              "host": ["{{baseUrl}}"],
              "path": ["api", "workflow", ":expedienteId", "cambiar-estado"],
              "variable": [
                {
                  "key": "expedienteId",
                  "value": "1",
                  "description": "ID del expediente"
                }
              ]
            },
            "description": "Actualiza el estado del expediente en el workflow",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nuevo_estado\": \"consolidado\",\n  \"observaciones\": \"Expediente completo\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "auth": {
              "type": "noauth"
            }
          },
          "response": []
        },
        {
          "name": "Agregar documento desde workflow",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/workflow/:expedienteId/agregar-documento",
              "host": ["{{baseUrl}}"],
              "path": ["api", "workflow", ":expedienteId", "agregar-documento"],
              "variable": [
                {
                  "key": "expedienteId",
                  "value": "1",
                  "description": "ID del expediente"
                }
              ]
            },
            "description": "Añade un documento al expediente durante el flujo de trabajo",
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "documento",
                  "type": "file",
                  "src": "",
                  "description": "Archivo del documento"
                },
                {
                  "key": "documento_nombre",
                  "value": "Informe técnico",
                  "type": "text"
                },
                {
                  "key": "documento_tipo",
                  "value": "informe",
                  "type": "text"
                }
              ]
            },
            "auth": {
              "type": "noauth"
            }
          },
          "response": []
        },
        {
          "name": "Obtener historial de movimientos",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/workflow/:expedienteId/historial",
              "host": ["{{baseUrl}}"],
              "path": ["api", "workflow", ":expedienteId", "historial"],
              "variable": [
                {
                  "key": "expedienteId",
                  "value": "1",
                  "description": "ID del expediente"
                }
              ]
            },
            "description": "Lista todos los movimientos y cambios de estado del expediente",
            "auth": {
              "type": "noauth"
            }
          },
          "response": []
        },
        {
          "name": "Obtener estado del workflow",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/workflow/:expedienteId/estado-workflow",
              "host": ["{{baseUrl}}"],
              "path": ["api", "workflow", ":expedienteId", "estado-workflow"],
              "variable": [
                {
                  "key": "expedienteId",
                  "value": "1",
                  "description": "ID del expediente"
                }
              ]
            },
            "description": "Obtiene el estado actual del workflow. Crea workflow inicial si no existe",
            "auth": {
              "type": "noauth"
            }
          },
          "response": []
        },
        {
          "name": "Enviar expediente (alias)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/workflow/:expedienteId/enviar",
              "host": ["{{baseUrl}}"],
              "path": ["api", "workflow", ":expedienteId", "enviar"],
              "variable": [
                {
                  "key": "expedienteId",
                  "value": "1",
                  "description": "ID del expediente"
                }
              ]
            },
            "description": "Alias de enviar-a-oficina para compatibilidad con frontend",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"oficina_destino_id\": 2,\n  \"prioridad\": \"alta\",\n  \"motivo\": \"Revisión\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "auth": {
              "type": "noauth"
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "06. Oficinas",
      "description": "Gestión de oficinas gubernamentales y expedientes asociados",
      "item": [
        {
          "name": "Listar todas las oficinas",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/oficinas",
              "host": ["{{baseUrl}}"],
              "path": ["api", "oficinas"]
            },
            "description": "[ADMIN] Lista todas las oficinas activas del sistema"
          },
          "response": []
        },
        {
          "name": "Listar oficinas disponibles",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/oficinas/disponibles/:oficina_actual_id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "oficinas", "disponibles", ":oficina_actual_id"],
              "variable": [
                {
                  "key": "oficina_actual_id",
                  "value": "1",
                  "description": "ID de la oficina actual"
                }
              ]
            },
            "description": "Lista oficinas disponibles para envío, excluyendo la actual"
          },
          "response": []
        },
        {
          "name": "Obtener oficina por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/oficinas/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "oficinas", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID de la oficina"
                }
              ]
            },
            "description": "[ADMIN] Obtiene los detalles de una oficina específica"
          },
          "response": []
        },
        {
          "name": "Crear oficina",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/oficinas",
              "host": ["{{baseUrl}}"],
              "path": ["api", "oficinas"]
            },
            "description": "[ADMIN] Crea una nueva oficina en el sistema",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Oficina de Recursos Humanos\",\n  \"descripcion\": \"Gestión de personal\",\n  \"codigo\": \"RRHH-01\",\n  \"responsable\": \"Juan Perez\",\n  \"email\": \"rrhh@gobierno.gob.ar\",\n  \"telefono\": \"264-4234567\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Actualizar oficina",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/oficinas/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "oficinas", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID de la oficina"
                }
              ]
            },
            "description": "[ADMIN] Actualiza los datos de una oficina existente",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Oficina de Recursos Humanos - Actualizada\",\n  \"activa\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Desactivar oficina",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/oficinas/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "oficinas", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID de la oficina"
                }
              ]
            },
            "description": "[ADMIN] Desactiva una oficina (soft delete)"
          },
          "response": []
        },
        {
          "name": "Listar expedientes de oficina",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/oficinas/:id/expedientes?estado=en_proceso",
              "host": ["{{baseUrl}}"],
              "path": ["api", "oficinas", ":id", "expedientes"],
              "query": [
                {
                  "key": "estado",
                  "value": "en_proceso",
                  "description": "Filtrar por estado"
                }
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID de la oficina"
                }
              ]
            },
            "description": "[ADMIN] Lista todos los expedientes de una oficina con filtros"
          },
          "response": []
        }
      ]
    },
    {
      "name": "07. Administración",
      "description": "Funciones administrativas para gestión de usuarios",
      "item": [
        {
          "name": "Listar todos los usuarios",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/usuarios",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "usuarios"]
            },
            "description": "[ADMIN] Lista todos los usuarios con información de oficinas"
          },
          "response": []
        },
        {
          "name": "Crear usuario",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/usuarios",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "usuarios"]
            },
            "description": "[ADMIN] Crea un nuevo usuario con rol y oficina",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"jperez\",\n  \"nombre_completo\": \"Juan Perez\",\n  \"email\": \"jperez@gobierno.gob.ar\",\n  \"password\": \"password123\",\n  \"rol_usuario\": \"funcionario_oficial\",\n  \"oficina_id\": 1\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Actualizar usuario",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/usuarios/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "usuarios", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del usuario"
                }
              ]
            },
            "description": "[ADMIN] Actualiza los datos de un usuario",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre_completo\": \"Juan Perez Actualizado\",\n  \"email\": \"jperez_nuevo@gobierno.gob.ar\",\n  \"rol_usuario\": \"administrador\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Eliminar usuario",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/usuarios/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "usuarios", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del usuario"
                }
              ]
            },
            "description": "[ADMIN] Elimina un usuario. No permite eliminar admin principal"
          },
          "response": []
        },
        {
          "name": "Cambiar contraseña de usuario",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/usuarios/:id/password",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "usuarios", ":id", "password"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del usuario"
                }
              ]
            },
            "description": "[ADMIN] Cambia la contraseña de cualquier usuario",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"password\": \"nueva_password_123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "08. Integración Laravel",
      "description": "Endpoints exclusivos para integración con sistema Laravel legacy (usuario 'eduge_service')",
      "item": [
        {
          "name": "Firmar documento desde Laravel",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/laravel/signatures/sign",
              "host": ["{{baseUrl}}"],
              "path": ["api", "laravel", "signatures", "sign"]
            },
            "description": "[SERVICE] Registra una firma digital desde Laravel con trazabilidad completa",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"laravelUser\": {\n    \"id\": 5,\n    \"email\": \"usuario@eduge.gob.ar\",\n    \"name\": \"Juan Perez\"\n  },\n  \"documentData\": {\n    \"nombre\": \"Acta_Reunion.pdf\",\n    \"hash\": \"abc123def456...\",\n    \"tipo\": \"application/pdf\",\n    \"tamaño\": 1024000\n  },\n  \"signatureData\": {\n    \"firma_digital\": \"base64_signature_here\",\n    \"algoritmo\": \"SHA256\",\n    \"certificado_id\": 10\n  },\n  \"metadata\": {\n    \"ip_address\": \"10.64.160.100\",\n    \"user_agent\": \"Mozilla/5.0\",\n    \"numero_expediente\": \"EXP-2026-001\"\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Obtener firmas de usuario Laravel",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/laravel/signatures/user/:laravelUserId?page=1&limit=50&estado=valida",
              "host": ["{{baseUrl}}"],
              "path": ["api", "laravel", "signatures", "user", ":laravelUserId"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Número de página"
                },
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Límite de resultados (max 50)"
                },
                {
                  "key": "estado",
                  "value": "valida",
                  "description": "Filtrar por estado",
                  "disabled": true
                }
              ],
              "variable": [
                {
                  "key": "laravelUserId",
                  "value": "5",
                  "description": "ID del usuario en Laravel"
                }
              ]
            },
            "description": "[SERVICE] Lista todas las firmas de un usuario de Laravel"
          },
          "response": []
        },
        {
          "name": "Verificar firma específica",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/laravel/signatures/:signatureId/verify",
              "host": ["{{baseUrl}}"],
              "path": ["api", "laravel", "signatures", ":signatureId", "verify"],
              "variable": [
                {
                  "key": "signatureId",
                  "value": "100",
                  "description": "ID de la firma"
                }
              ]
            },
            "description": "[SERVICE] Verifica la validez y estado de una firma"
          },
          "response": []
        },
        {
          "name": "Obtener estadísticas de usuario",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/laravel/users/:laravelUserId/stats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "laravel", "users", ":laravelUserId", "stats"],
              "variable": [
                {
                  "key": "laravelUserId",
                  "value": "5",
                  "description": "ID del usuario en Laravel"
                }
              ]
            },
            "description": "[SERVICE] Obtiene estadísticas de firmas de un usuario Laravel"
          },
          "response": []
        },
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/laravel/health",
              "host": ["{{baseUrl}}"],
              "path": ["api", "laravel", "health"]
            },
            "description": "[SERVICE] Verifica que la integración con Laravel esté funcionando correctamente"
          },
          "response": []
        }
      ]
    }
  ]
}
